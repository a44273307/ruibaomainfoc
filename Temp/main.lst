C51 COMPILER V9.05   MAIN                                                                  05/07/2023 12:28:06 PAGE 1   


C51 COMPILER V9.05, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN ..\Output\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\User\main.c LARGE OPTIMIZE(1,SPEED) BROWSE INCDIR(..\User;..\Library) DE
                    -BUG OBJECTEXTEND PRINT(..\Temp\main.lst) OBJECT(..\Output\main.obj)

line level    source

   1          /************************************************************************************
   2             
   3          程序名称： （晶振频率18.432MHz） 
   4          功能说明: 通过串口3发送“Everything is possible!”  
   5                    波特率9600，数据位8，奇偶效验无，停止位1，数据流控制无  
   6          ************************************************************************************/
   7          #include "stc15f2k60s2.h"           // 单片机STC15F2K60S2头文件,可以不再加入reg51.h
   8          #include <intrins.h>                                    // 加入此头文件后,可使用_nop_库函数
   9          #include "delay.h"                      // 延时函数头文件
  10          #include "uart.h"                               // 串行通信函数头文件
  11          #define  uint unsigned int  
  12          #define  uchar unsigned char    
  13          #include <stdio.h>
  14          #include <string.h>
  15          uint weishu1,weishu2,weishu3,weishu4;
  16          uchar buf1[100];
  17          uchar buf2[100];
  18          uchar buf3[100];
  19          uchar buf4[100];
  20          uint temp1,temp2,temp3,temp4;
  21          
  22          
  23          
  24          
  25          //sbit x0 = P4^3;
  26          //sbit x1 = P4^4; 
  27          //sbit x2 = P2^0; 
  28          //sbit x3 = P2^1;  
  29          //sbit x4 = P2^2;  
  30          //sbit x5 = P2^3;
  31          //sbit x6 = P2^4; 
  32          //sbit x7 = P2^5;
  33          //sbit x10 = P2^6;
  34          //sbit x11 = P2^7; 
  35          //sbit x12 = P4^5;
  36          //sbit x13 = P4^6;
  37          
  38          sbit x0 = P2^4; 
  39          sbit x1 = P2^5; 
  40          
  41          
  42          sbit x2 = P2^6;  
  43          sbit x3 = P2^7;
  44          
  45          sbit x4 = P4^5; 
  46          sbit x5 = P4^6;
  47          
  48          sbit x6 = P0^2;
  49          sbit x7 = P0^3; 
  50          
  51          sbit x8 = P0^4; 
  52          sbit x9 = P5^2;
  53          
  54          
C51 COMPILER V9.05   MAIN                                                                  05/07/2023 12:28:06 PAGE 2   

  55          
  56          
  57          sbit y0 = P2^3;  
  58          sbit y1 = P2^2; 
  59          sbit y2 = P2^1;
  60          sbit y3 = P2^0;
  61          sbit y4 = P4^4;
  62          sbit y5 = P4^3;
  63          
  64          
  65          
  66          void printf2(char *puts)
  67          {
  68   1               while(*puts) 
  69   1              {
  70   2                      sendbyte2(*puts);
  71   2                      puts++;
  72   2              }
  73   1      }
  74          
  75          void io_inint()
  76          {
  77   1              P0M1 = 0;       P0M0 = 0;       //设置P0.0~P0.7为准双向口
  78   1              P1M1 = 0;       P1M0 = 0;       //设置P1.0~P1.7为准双向口
  79   1              P2M1 = 0;       P2M0 = 0;       //设置P2.0~P2.7为准双向口 
  80   1              P3M1 = 0;       P3M0 = 0;       //设置P3.0~P3.7为准双向口
  81   1              P4M1 = 0;       P4M0 = 0;       //设置P4.0~P4.7为准双向口
  82   1              P5M1 = 0;       P5M0 = 0;       //设置P5.0~P5.7为准双向口
  83   1      }
  84          
  85          
  86          
  87          
  88          int xinget(int zhi)
  89          {
  90   1              if(zhi==0) return x0;
  91   1              if(zhi==1) return x1;
  92   1              if(zhi==2) return x2;
  93   1              if(zhi==3) return x3;
  94   1              if(zhi==4) return x4;
  95   1              if(zhi==5) return x5;
  96   1              if(zhi==6) return x6;
  97   1              if(zhi==7) return x7;
  98   1              if(zhi==8) return x8;
  99   1              if(zhi==9) return x9;
 100   1      }
 101          void getxin()
 102          {
 103   1              int i;
 104   1              char datatmp[10];
 105   1              for(i=0;i<10;i++)
 106   1              {
 107   2                      sprintf(datatmp,"x%d %d\n",i,xinget(i));
 108   2                      PrintString(datatmp);
 109   2              }
 110   1      }
 111          void delay_ms(int m)
 112          {
 113   1              int x,y;
 114   1              for(x=m;x>0;x--)
 115   1              for(y=220;y>0;y--);
 116   1      }
C51 COMPILER V9.05   MAIN                                                                  05/07/2023 12:28:06 PAGE 3   

 117          
 118          void main()                                                    
 119          {
 120   1              
 121   1              io_inint();
 122   1              Uart23Init();
 123   1              
 124   1              
 125   1              Timer0Init();
 126   1              UartInit();
 127   1              
 128   1              Uart4Init();
 129   1              while (1)
 130   1              {
 131   2                      delay_ms(100);
 132   2                      PrintString("12345");
 133   2                      sendbyte3('a'); 
 134   2              }
 135   1      }
 136                   
 137                   
 138          
 139                   
 140                   
 141          uint time,lv_bo;
 142          void Timer0() interrupt 1
 143          {
 144   1              
 145   1      }
 146          char buffxxx[100]="";
 147          char buffweizhi=0;
 148          void dealrecI(char c)
 149          {
 150   1              
 151   1      }
*** WARNING C280 IN LINE 148 OF ..\User\main.c: 'c': unreferenced local variable
 152          void UARTInterrupt(void) interrupt 4
 153          {
 154   1              char downstr;
 155   1              if (RI)
 156   1              {
 157   2                      RI = 0;
 158   2                      
 159   2              }
 160   1              else
 161   1              {
 162   2                      TI = 0;
 163   2              }
 164   1              if (TI) //发送中断..
 165   1              {
 166   2                      TI = 0;
 167   2              }
 168   1      }
*** WARNING C280 IN LINE 154 OF ..\User\main.c: 'downstr': unreferenced local variable
 169          
 170          void uart2(void ) interrupt 8 
 171          {
 172   1        if (S2CON & S2RI)
 173   1              {
 174   2                      S2CON &= ~S2RI;         
 175   2                      temp2 = S2BUF;
 176   2              }
C51 COMPILER V9.05   MAIN                                                                  05/07/2023 12:28:06 PAGE 4   

 177   1        if (S2CON & S2TI)
 178   1          {
 179   2                              //y1=0;
 180   2              S2CON &= ~S2TI;         //清除S2TI位
 181   2              busy2 = 0;               //清忙标志
 182   2          }  
 183   1      }
 184          
 185            
 186          
 187          
 188          void Uart3() interrupt 17 using 1
 189          {
 190   1          if (S3CON & S3RI)
 191   1          {
 192   2              S3CON &= ~S3RI;         //??S3RI?
 193   2              temp3 = S3BUF;
 194   2                                      
 195   2         }
 196   1      if (S3CON & S3TI)
 197   1          {
 198   2              S3CON &= ~S3TI;         //清除S3TI位
 199   2              busy3 = 0;               //清忙标志
 200   2          }
 201   1      }
 202          
 203          void Uart4() interrupt 18 
 204          {
 205   1          if (S4CON & S4RI)
 206   1          {
 207   2              S4CON &= ~S4RI;         //??S4RI?
 208   2              temp4=S4BUF;
 209   2         }
 210   1      if(TI4)
 211   1              {
 212   2                      CLR_TI4();
 213   2                      busy4 = 0;               //清忙标志
 214   2              }
 215   1      }
 216          
 217          
 218          
*** WARNING C291 IN LINE 100 OF ..\User\main.c: not every exit path returns a value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    770    ----
   CONSTANT SIZE    =     14    ----
   XDATA SIZE       =    546    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  3 WARNING(S),  0 ERROR(S)
